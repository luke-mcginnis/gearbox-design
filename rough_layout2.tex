
\tikzmath{
    \fa = 1;
    \sh = 1;
    \be = 1;
    \ex = 2;
    \startx = 3;
    \starty = 16;
    \diameterP = 2;
    \diameterG = 5;
    \lefthand = -30;
    \righthand = \lefthand * -1;
    \centerdist = (\diameterP+\diameterG)/2;
}

\newcommand{\Gear}[5] % x, y, d, face, angle
{
    \draw[thick, fill=white] (#1 - #3/2, #2) rectangle (#1 + #3/2, #2 + #4);
    \draw[thick, pattern={Lines[angle=90-#5,distance=3pt,line width=0.5pt]}] (#1 - #3/2, #2) rectangle (#1 + #3/2, #2 + #4);
    
}

\newcommand{\Bearing}[4] % x, y, width, height
{
    \draw (#1, #2) rectangle (#1+#3, #2+#4);
    \draw (#1, #2) -- (#1+#3, #2+#4);
    \draw (#1, #2+#4) -- (#1+#3, #2);
}


\begin{tikzpicture}[scale=0.7, x=0.25in, y=0.25in, show background rectangle, inner frame xsep=50pt]
    \draw[fill=gray!15] (\startx-1,\starty-\ex) rectangle (17, 3);

    % \draw[help lines, step=0.25in] (0,0) grid (24, 17); % TEMP HELPER GRID
    \draw[thick, fill=gray!30] (\startx,\starty) rectangle (\startx+1, \starty-\ex-2*\be-3*\sh-2*\fa);
    \draw[dash pattern=on 2pt off 3pt on 8pt off 3pt] (\startx+0.5,\starty+0.5) node [above] {$A$} -- (\startx+0.5, \starty-\ex-2*\be-3*\sh-2*\fa-0.5) node [below] {$A$};
    \Bearing{\startx}{\starty-\ex-\be}{1}{1}
    \Bearing{\startx}{\starty-\ex-2*\fa-3*\sh-\be-\be}{1}{1}
    \Gear{\startx+.5}{\starty-\ex-\sh-\be-\fa}{\diameterP}{\fa}{\righthand}

    \draw[thick, fill=gray!30] (\startx+\centerdist,\starty-\ex)
     rectangle (\startx+1+\centerdist, \starty-\ex-2*\be-3*\sh-2*\fa);
    \draw[dash pattern=on 2pt off 3pt on 8pt off 3pt] (\startx+\centerdist+0.5,\starty-\ex+0.5) node [above] {$B$} -- (\startx+0.5+\centerdist, \starty-\ex-2*\be-3*\sh-2*\fa-0.5) node [below] {$B$};
    \Bearing{\startx+\centerdist}{\starty-\ex-\be}{1}{1}
    \Bearing{\startx+\centerdist}{\starty-\ex-2*\fa-3*\sh-\be-\be}{1}{1}
    \Gear{\startx+\centerdist+.5}{\starty-\ex-\sh-\be-\fa}{\diameterG}{\fa}{\lefthand}
    \Gear{\startx+\centerdist+.5}{\starty-\ex-2*\sh-\be-2*\fa}{\diameterP}{\fa}{\righthand}

    \draw[thick, fill=gray!30] (\startx+2*\centerdist,\starty-\ex)
     rectangle (\startx+1+2*\centerdist, \starty-\ex-3*\be-5*\sh-3*\fa);
    \draw[dash pattern=on 2pt off 3pt on 8pt off 3pt] (\startx+2*\centerdist+0.5,\starty-\ex+0.5) node [above] {$C$} -- (\startx+2*\centerdist+0.5, \starty-\ex-3*\be-5*\sh-3*\fa-0.5) node [below] {$C$};
    \Bearing{\startx+2*\centerdist}{\starty-\ex-\be}{1}{1}
    \Bearing{\startx+2*\centerdist}{\starty-\ex-2*\be-3*\sh-2*\fa}{1}{1}
    \Bearing{\startx+2*\centerdist}{\starty-\ex-3*\be-5*\sh-3*\fa}{1}{1}
    \Gear{\startx+2*\centerdist+.5}{\starty-\ex-\fa-\sh-\sh-\be-\be}{\diameterG}{\fa}{\lefthand}
    \Gear{\startx+2*\centerdist+.5}{\starty-\ex-2*\be-4*\sh-3*\fa}{\diameterP}{\fa}{\righthand}

    \draw[thick, fill=gray!30] (\startx+3*\centerdist, \starty-\ex-1*\be-3*\sh-2*\fa)
     rectangle (\startx+1+3*\centerdist, \starty-\ex-3*\be-5*\sh-3*\fa-\ex);
     \draw[dash pattern=on 2pt off 3pt on 8pt off 3pt]  (\startx+3*\centerdist+0.5,\starty-\ex-1*\be-3*\sh-2*\fa+0.5) node [above] {$D$} -- (\startx+3*\centerdist+0.5, \starty-\ex-3*\be-5*\sh-3*\fa-\ex-0.5) node [below] {$D$};
    \Bearing{\startx+3*\centerdist}{\starty-\ex-2*\be-3*\sh-2*\fa}{1}{1}
    \Bearing{\startx+3*\centerdist}{\starty-\ex-3*\be-5*\sh-3*\fa}{1}{1}
    \Gear{\startx+3*\centerdist+.5}{\starty-\ex-2*\be-4*\sh-3*\fa}{\diameterG}{\fa}{\lefthand}








\end{tikzpicture}
